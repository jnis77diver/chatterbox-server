var utils = require('./utils');
var data = {"results":[{"createdAt":"2015-02-24T01:33:56.764Z","objectId":"x7D24PZDgN","roomname":"","text":"gyudftyf'","updatedAt":"2015-02-24T01:33:56.764Z","username":"Nigel"},{"createdAt":"2015-02-24T01:07:19.293Z","objectId":"mbgpQgCsY8","text":"213\n","updatedAt":"2015-02-24T01:07:19.293Z","username":"Daniel"},{"createdAt":"2015-02-24T01:04:12.505Z","objectId":"g6airnWbiN","text":"hi","updatedAt":"2015-02-24T01:04:12.505Z"},{"createdAt":"2015-02-24T00:39:06.752Z","objectId":"kXfgLpSXfb","roomname":"lobby","text":"what","updatedAt":"2015-02-24T00:39:06.752Z","username":"Jack"},{"createdAt":"2015-02-24T00:38:44.352Z","objectId":"73GVHFSea5","roomname":"What","text":"lobby","updatedAt":"2015-02-24T00:38:44.352Z","username":"Jaack"},{"createdAt":"2015-02-24T00:37:24.835Z","objectId":"CNFpTlnSDi","roomname":"where","text":"what","updatedAt":"2015-02-24T00:37:24.835Z","username":"Jack"},{"createdAt":"2015-02-24T00:27:54.097Z","objectId":"4dUEcD8e2e","text":"hi","updatedAt":"2015-02-24T00:27:54.097Z"},{"createdAt":"2015-02-24T00:23:53.174Z","objectId":"rOucB96hbi","text":"hi","updatedAt":"2015-02-24T00:23:53.174Z"},{"createdAt":"2015-02-24T00:23:35.356Z","objectId":"aYedi3k9eq","text":"hi","updatedAt":"2015-02-24T00:23:35.356Z"},{"createdAt":"2015-02-24T00:23:34.379Z","objectId":"bKocaYauE5","text":"hi","updatedAt":"2015-02-24T00:23:34.379Z"},{"createdAt":"2015-02-24T00:20:20.292Z","objectId":"xClQTK6UnH","text":"        Here I am","updatedAt":"2015-02-24T00:20:20.292Z","username":"jnis"},{"createdAt":"2015-02-24T00:17:28.394Z","objectId":"lF876YuMUj","roomname":"lobby","text":"adsf","updatedAt":"2015-02-24T00:17:28.394Z","username":"Ryabn"},{"createdAt":"2015-02-24T00:17:21.768Z","objectId":"zWbAZZ8yCo","roomname":"Testing1124314123","text":"R;lkja","updatedAt":"2015-02-24T00:17:21.768Z","username":"Ryabn"},{"createdAt":"2015-02-24T00:17:08.203Z","objectId":"p92Do7TX9w","roomname":"serverroom","text":"What","updatedAt":"2015-02-24T00:17:08.203Z","username":"Ryabn"},{"createdAt":"2015-02-24T00:07:25.416Z","objectId":"KAGe29B93X","roomname":"testing","text":"what%20the%20hell","updatedAt":"2015-02-24T00:07:25.416Z","username":"hello"},{"createdAt":"2015-02-24T00:07:20.477Z","objectId":"LinEL1kngC","roomname":"testing","text":"hello","updatedAt":"2015-02-24T00:07:20.477Z","username":"hello"},{"createdAt":"2015-02-24T00:07:08.155Z","objectId":"l12GBDP7JD","roomname":"testing","text":"%3Cscript%3Ealert%3C/script%3E","updatedAt":"2015-02-24T00:07:08.155Z","username":"anonymous"},{"createdAt":"2015-02-24T00:06:56.810Z","objectId":"W6tsYP5kxU","roomname":"testing","text":"hello","updatedAt":"2015-02-24T00:06:56.810Z","username":"anonymous"},{"createdAt":"2015-02-24T00:06:52.392Z","objectId":"QQI6r2MHpS","roomname":"testing","text":"by%20the%20way","updatedAt":"2015-02-24T00:06:52.392Z","username":"anonymous"},{"createdAt":"2015-02-24T00:06:46.630Z","objectId":"R8gk9EaE6m","roomname":"testing","text":"hello","updatedAt":"2015-02-24T00:06:46.630Z","username":"anonymous"},{"createdAt":"2015-02-23T23:55:39.316Z","objectId":"N0kTgmq8Rr","roomname":"hey","text":"hey","updatedAt":"2015-02-23T23:55:39.316Z","username":"Whatever"},{"createdAt":"2015-02-23T23:55:31.130Z","objectId":"rxBHMmorll","roomname":"a","text":"a","updatedAt":"2015-02-23T23:55:31.130Z","username":"Whatever"},{"createdAt":"2015-02-23T23:40:39.711Z","objectId":"pd9Gf8Y2AR","roomname":"hi","text":"hi","updatedAt":"2015-02-23T23:40:39.711Z","username":"a"},{"createdAt":"2015-02-23T23:38:56.268Z","objectId":"88T58h8Kdi","roomname":"a","text":"a","updatedAt":"2015-02-23T23:38:56.268Z","username":"a"},{"createdAt":"2015-02-23T23:37:38.051Z","objectId":"6tmTTdo4z4","roomname":"a","text":"a","updatedAt":"2015-02-23T23:37:38.051Z","username":"a"},{"createdAt":"2015-02-23T23:35:03.598Z","objectId":"QtTL3cmBwr","text":"Test","updatedAt":"2015-02-23T23:35:03.598Z","username":"Daniel"},{"createdAt":"2015-02-23T23:34:50.546Z","objectId":"om1TWCh68K","text":"Test","updatedAt":"2015-02-23T23:34:50.546Z","username":"Daniel"},{"createdAt":"2015-02-23T23:31:42.482Z","objectId":"yNsRlYqzBY","roomname":"a","text":"a","updatedAt":"2015-02-23T23:31:42.482Z","username":"a"},{"createdAt":"2015-02-23T23:29:43.621Z","objectId":"vyczWmeUnt","roomname":"a","text":"a","updatedAt":"2015-02-23T23:29:43.621Z","username":"a"},{"createdAt":"2015-02-23T23:27:48.811Z","objectId":"iZDE5jnZgn","roomname":"lobby","text":"dffgfggfgfdfgdfdg","updatedAt":"2015-02-23T23:27:48.811Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:27:46.680Z","objectId":"nDMnbLx8It","roomname":"lobby","text":"","updatedAt":"2015-02-23T23:27:46.680Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:27:45.553Z","objectId":"xCTTuys56R","roomname":"lobby","text":"","updatedAt":"2015-02-23T23:27:45.553Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:27:44.591Z","objectId":"977t3Owbrz","roomname":"lobby","text":"","updatedAt":"2015-02-23T23:27:44.591Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:27:43.368Z","objectId":"JjBvx8T9ry","roomname":"lobby","text":"dfgfgdfdfdgf","updatedAt":"2015-02-23T23:27:43.368Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:27:41.153Z","objectId":"xXghguBSgB","roomname":"lobby","text":"","updatedAt":"2015-02-23T23:27:41.153Z","username":"fgfgf"},{"createdAt":"2015-02-23T23:26:07.990Z","objectId":"R9z49BRv6X","roomname":"davidanderic","text":"so%20how%27s%20that","updatedAt":"2015-02-23T23:26:07.990Z","username":"drceric"},{"createdAt":"2015-02-23T23:25:55.982Z","objectId":"pfa7GOemVg","roomname":"davidanderic","text":"hello","updatedAt":"2015-02-23T23:25:55.982Z","username":"drceric"},{"createdAt":"2015-02-23T23:25:38.068Z","objectId":"Ye9OerlFLn","roomname":"testing","text":"I%20don%27t%20know","updatedAt":"2015-02-23T23:25:38.068Z","username":"drceric"},{"createdAt":"2015-02-23T23:25:28.129Z","objectId":"lpiu8ZwEEJ","roomname":"testing","text":"what%27s%20going%20on","updatedAt":"2015-02-23T23:25:28.129Z","username":"drceric"},{"createdAt":"2015-02-23T23:25:20.235Z","objectId":"9SYtGoLupk","roomname":"testing","text":"hello","updatedAt":"2015-02-23T23:25:20.235Z","username":"drceric"},{"createdAt":"2015-02-23T23:23:57.091Z","objectId":"ybYgseviAj","roomname":"a","text":"a","updatedAt":"2015-02-23T23:23:57.091Z","username":"a"},{"createdAt":"2015-02-23T23:23:01.379Z","objectId":"qJrfrrUeFC","roomname":"lobby","text":"hey","updatedAt":"2015-02-23T23:23:01.379Z","username":"Steve"},{"createdAt":"2015-02-23T23:22:59.116Z","objectId":"og9aDfUbd1","roomname":"Everywhere","text":"A study showed the leading causes of death in the United States are: 1. Heart disease, 2. Chuck Norris, 3. Cancer","updatedAt":"2015-02-23T23:22:59.116Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:48.193Z","objectId":"XiM1ADfXwq","roomname":"Everywhere","text":"Chuck Norris eats lightning and shits out thunder.","updatedAt":"2015-02-23T23:22:48.193Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:37.491Z","objectId":"ZDV3X3gnYw","roomname":"Everywhere","text":"Chuck Norris's keyboard doesn't have a Ctrl key because nothing controls Chuck Norris.","updatedAt":"2015-02-23T23:22:37.491Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:25.706Z","objectId":"KbfOC0WBDj","roomname":"Everywhere","text":"Jesus can walk on water, but Chuck Norris can walk on Jesus.","updatedAt":"2015-02-23T23:22:25.706Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:15.116Z","objectId":"6kyAW1vp4i","roomname":"Everywhere","text":"Chuck Norris? sperm is so badass, he had sex with Nicole Kidman, and 7 months later she prematurely gave birth to a Ford Excursion.","updatedAt":"2015-02-23T23:22:15.116Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:12.286Z","objectId":"n7pzPGFtNA","roomname":"lobby","text":"test","updatedAt":"2015-02-23T23:22:12.286Z","username":"mike"},{"createdAt":"2015-02-23T23:22:03.574Z","objectId":"ECGt0nYhJY","roomname":"Everywhere","text":"Faster than a speeding bullet... More powerful than a locomotive... Able to leap tall buildings in a single bound... These are some of Chuck Norris's warm-up exercises.","updatedAt":"2015-02-23T23:22:03.574Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:22:01.445Z","objectId":"2TrJ8LcIWl","roomname":"serverroom","text":"test","updatedAt":"2015-02-23T23:22:01.445Z","username":"test"},{"createdAt":"2015-02-23T23:21:53.737Z","objectId":"BE7r5rGN8e","roomname":"Everywhere","text":"The best-laid plans of mice and men often go awry. Even the worst-laid plans of Chuck Norris come off without a hitch.","updatedAt":"2015-02-23T23:21:53.737Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:21:41.691Z","objectId":"EAcfrRnsTL","roomname":"Everywhere","text":"Product Owners never argue with Chuck Norris after he demonstrates the DropKick feature.","updatedAt":"2015-02-23T23:21:41.691Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:21:36.105Z","objectId":"r5vLJzxzyf","roomname":"HR25","text":"testing","updatedAt":"2015-02-23T23:21:36.105Z","username":"Joe SHmo"},{"createdAt":"2015-02-23T23:21:31.809Z","objectId":"ZzHoQr3p0s","roomname":"HR25","text":"testing","updatedAt":"2015-02-23T23:21:31.809Z","username":"Joe SHmo"},{"createdAt":"2015-02-23T23:21:31.297Z","objectId":"WUSdx4D2xW","roomname":"Everywhere","text":"Chuck Norris does not wear a condom. Because there is no such thing as protection from Chuck Norris.","updatedAt":"2015-02-23T23:21:31.297Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:21:29.867Z","objectId":"6y05ZzeCdk","roomname":"serverroom","text":"test","updatedAt":"2015-02-23T23:21:29.867Z","username":"hello"},{"createdAt":"2015-02-23T23:21:20.550Z","objectId":"0U4NF0sq9N","roomname":"Everywhere","text":"When you play Monopoly with Chuck Norris, you do not pass go, and you do not collect two hundred dollars. You will be lucky if you make it out alive.","updatedAt":"2015-02-23T23:21:20.550Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:21:16.155Z","objectId":"LAobFmfbNU","roomname":"lobby","text":"yo","updatedAt":"2015-02-23T23:21:16.155Z","username":"John"},{"createdAt":"2015-02-23T23:21:08.845Z","objectId":"s0QRI2rXMo","roomname":"Everywhere","text":"Chuck Norris invented his own type of karate. It's called Chuck-Will-Kill.","updatedAt":"2015-02-23T23:21:08.845Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:58.531Z","objectId":"Spw6dAy0EB","roomname":"Everywhere","text":"Chuck Norris's OSI network model has only one layer - Physical.","updatedAt":"2015-02-23T23:20:58.531Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:47.321Z","objectId":"jYh35Cqbdn","roomname":"Everywhere","text":"Chuck Norris began selling the Total Gym as an ill-fated attempt to make his day-to-day opponents less laughably pathetic.","updatedAt":"2015-02-23T23:20:47.321Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:35.672Z","objectId":"LxXDLao8cy","roomname":"Everywhere","text":"Chuck Norris destroyed the periodic table, because Chuck Norris only recognizes the element of surprise.","updatedAt":"2015-02-23T23:20:35.672Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:24.911Z","objectId":"omEe45EMkT","roomname":"Everywhere","text":"Chuck Norris is the only human being to display the Heisenberg uncertainty principle - you can never know both exactly where and how quickly he will roundhouse-kick you in the face.","updatedAt":"2015-02-23T23:20:24.911Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:13.684Z","objectId":"yOOpB2W9aC","roomname":"Everywhere","text":"Chuck Norris has 12 moons. One of those moons is the Earth.","updatedAt":"2015-02-23T23:20:13.684Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:20:03.200Z","objectId":"ugk4CpfP5c","roomname":"Everywhere","text":"Chuck Norris eats beef jerky and craps gunpowder. Then, he uses that gunpowder to make a bullet, which he uses to kill a cow and make more beef jerky. Some people refer to this as the &quot;Circle of Life.&quot;","updatedAt":"2015-02-23T23:20:03.200Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:19:51.936Z","objectId":"hI5NdmyfO0","roomname":"Everywhere","text":"Chuck Norris doesn't stub his toes. He accidentally destroys chairs, bedframes, and sidewalks.","updatedAt":"2015-02-23T23:19:51.936Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:19:41.496Z","objectId":"01kxZSa9RX","roomname":"Everywhere","text":"Chuck Norris knows the last digit of pi.","updatedAt":"2015-02-23T23:19:41.496Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:19:31.102Z","objectId":"L5rQuMA4dr","roomname":"Johnny C","text":"word to my brother","updatedAt":"2015-02-23T23:19:31.102Z","username":"Sharkishsha"},{"createdAt":"2015-02-23T23:19:30.413Z","objectId":"3PTRBri3u7","roomname":"Everywhere","text":"MacGyver immediately tried to make a bomb out of some Q-Tips and Gatorade, but Chuck Norris roundhouse-kicked him in the solar plexus. MacGyver promptly threw up his own heart.","updatedAt":"2015-02-23T23:19:30.413Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:19:18.744Z","objectId":"AEfGEPSNe6","roomname":"Everywhere","text":"Chuck Norris once round-house kicked a salesman. Over the phone.","updatedAt":"2015-02-23T23:19:18.744Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:19:08.016Z","objectId":"CWjzvPd8uP","roomname":"Everywhere","text":"You know how they say if you die in your dream then you will die in real life? In actuality, if you dream of death then Chuck Norris will find you and kill you.","updatedAt":"2015-02-23T23:19:08.016Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:57.146Z","objectId":"b2f207Vw89","roomname":"Everywhere","text":"Chuck Norris can make a class that is both abstract and final.","updatedAt":"2015-02-23T23:18:57.146Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:46.158Z","objectId":"JjiPG10ZBD","roomname":"Everywhere","text":"Chuck Norris doesn't shower, he only takes blood baths.","updatedAt":"2015-02-23T23:18:46.158Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:34.954Z","objectId":"z8DAau6hpb","roomname":"Everywhere","text":"Don't worry about tests, Chuck Norris's test cases cover your code too.","updatedAt":"2015-02-23T23:18:34.954Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:24.565Z","objectId":"OH0yElNsjm","roomname":"Everywhere","text":"Chuck Norris doesn't need a debugger, he just stares down the bug until the code confesses.","updatedAt":"2015-02-23T23:18:24.565Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:13.195Z","objectId":"chAmbJlgIB","roomname":"Everywhere","text":"Chuck Norris once pulled out a single hair from his beard and skewered three men through the heart with it.","updatedAt":"2015-02-23T23:18:13.195Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:18:02.718Z","objectId":"xRiv9W6j2P","roomname":"Everywhere","text":"In a recent survey it was discovered the 94% of American women lost their virginity to Chuck Norris. The other 6% were incredibly fat or ugly.","updatedAt":"2015-02-23T23:18:02.718Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:17:50.701Z","objectId":"YrjA68aciK","roomname":"Everywhere","text":"There is no Esc key on Chuck Norris' keyboard, because no one escapes Chuck Norris.","updatedAt":"2015-02-23T23:17:50.701Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:17:40.305Z","objectId":"hAyTIBR6an","roomname":"Everywhere","text":"Science Fact: Roundhouse kicks are comprised primarily of an element called Chucktanium.","updatedAt":"2015-02-23T23:17:40.305Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:17:29.158Z","objectId":"CGWWAszVH0","roomname":"Everywhere","text":"It's widely believed that Jesus was Chuck Norris' stunt double for crucifixion due to the fact that it is impossible for nails to pierce Chuck Norris' skin.","updatedAt":"2015-02-23T23:17:29.158Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:17:17.781Z","objectId":"X9WIt8NVb9","roomname":"Everywhere","text":"Chuck Norris once ate an entire bottle of sleeping pills. They made him blink.","updatedAt":"2015-02-23T23:17:17.781Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:17:07.210Z","objectId":"JrmfmcMo1a","roomname":"Everywhere","text":"Fear is not the only emotion Chuck Norris can smell. He can also detect hope, as in &quot;I hope I don't get a roundhouse kick from Chuck Norris.&quot;","updatedAt":"2015-02-23T23:17:07.210Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:56.082Z","objectId":"EStahMz78H","roomname":"Everywhere","text":"Along with his black belt, Chuck Norris often chooses to wear brown shoes. No one has DARED call him on it. Ever.","updatedAt":"2015-02-23T23:16:56.082Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:44.958Z","objectId":"d62mcKifKY","roomname":"Everywhere","text":"Whiteboards are white because Chuck Norris scared them that way.","updatedAt":"2015-02-23T23:16:44.958Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:34.657Z","objectId":"OWOmcWQOhu","roomname":"Everywhere","text":"Police label anyone attacking Chuck Norris as a Code 45-11.... A suicide.","updatedAt":"2015-02-23T23:16:34.657Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:23.048Z","objectId":"Xh1mT8WS0u","roomname":"Everywhere","text":"Chuck Norris never has to build his program to machine code. Machines have learnt to interpret Chuck Norris code.","updatedAt":"2015-02-23T23:16:23.048Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:12.011Z","objectId":"9IF7OUp4DB","roomname":"Everywhere","text":"The only sure things are Death and Taxes?and when Chuck Norris goes to work for the IRS, they'll be the same thing.","updatedAt":"2015-02-23T23:16:12.011Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:16:01.606Z","objectId":"P86LqduAR5","roomname":"Everywhere","text":"As a teen, Chuck Norris had sex with every nun in a convent tucked away in the hills of Tuscany. Nine months later the nuns gave birth to the 1972 Miami Dolphins, the only undefeated and untied team in professional football history.","updatedAt":"2015-02-23T23:16:01.606Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:15:49.924Z","objectId":"XdZGdtyEKT","roomname":"Everywhere","text":"Chuck Norris does not own a stove, oven, or microwave , because revenge is a dish best served cold.","updatedAt":"2015-02-23T23:15:49.924Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:15:38.999Z","objectId":"WaF2FPCdB4","roomname":"Everywhere","text":"Chuck Norris shot the sheriff, but he round house kicked the deputy.","updatedAt":"2015-02-23T23:15:38.999Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:15:28.154Z","objectId":"IM3pzU2S14","roomname":"Everywhere","text":"Chuck Norris once one a game of connect four in 3 moves.","updatedAt":"2015-02-23T23:15:28.154Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:15:17.213Z","objectId":"WVJhXI4J8m","roomname":"Everywhere","text":"Chuck Norris doesn't play god. Playing is for children.","updatedAt":"2015-02-23T23:15:17.213Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:15:06.387Z","objectId":"iykZVYkPiq","roomname":"Everywhere","text":"If tapped, a Chuck Norris roundhouse kick could power the country of Australia for 44 minutes.","updatedAt":"2015-02-23T23:15:06.387Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:55.652Z","objectId":"zVnhvvykiQ","roomname":"Everywhere","text":"When Chuck Norris makes a burrito, its main ingredient is real toes.","updatedAt":"2015-02-23T23:14:55.652Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:43.686Z","objectId":"xPX7nC7uux","roomname":"Everywhere","text":"Chuck Norris doesn't need garbage collection because he doesn't call .Dispose(), he calls .DropKick().","updatedAt":"2015-02-23T23:14:43.686Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:33.745Z","objectId":"m7XS0ltICM","roomname":"Everywhere","text":"If you were somehow able to land a punch on Chuck Norris your entire arm would shatter upon impact. This is only in theory, since, come on, who in their right mind would try this?","updatedAt":"2015-02-23T23:14:33.745Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:22.223Z","objectId":"Vot3ml7Y8g","roomname":"Everywhere","text":"Behind every successful man, there is a woman. Behind every dead man, there is Chuck Norris.","updatedAt":"2015-02-23T23:14:22.223Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:11.652Z","objectId":"YZYCifUjv0","roomname":"Everywhere","text":"Chuck Norris uses canvas in IE.","updatedAt":"2015-02-23T23:14:11.652Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:14:00.015Z","objectId":"VgWywwm4bC","roomname":"Everywhere","text":"Mr. T pities the fool. Chuck Norris rips the fool's head off.","updatedAt":"2015-02-23T23:14:00.015Z","username":"Chuck Norris"},{"createdAt":"2015-02-23T23:13:49.256Z","objectId":"bzh9AOzEgj","roomname":"Everywhere","text":"Chuck Norris has to register every part of his body as a separate lethal weapon. His spleen is considered a concealed weapon in over 50 states.","updatedAt":"2015-02-23T23:13:49.256Z","username":"Chuck Norris"}]}
var dataTemp = {'results':[]};
var objectId = 1;
var actions = {
  'GET': function(request, response) {
    utils.sendResponse(response, data);
  },
  'POST': function(request, response) {
    utils.collectData(request, function(message) {
      data.push(message);
      message.objectId = ++objectId;
      utils.sendResponse(response, {objectId: objectId});
    });
  },
  'OPTIONS': function(request, response) {
    utils.sendResponse(response, null);
  }
};

module.exports = function(request, response) {
  console.log("Serving request type " + request.method + " for url " + request.url);
  var action = actions[request.method];
  if (action) {
    action(request, response);
  } else {
    utils.sendResponse(response, 'NOT FOUND', 404);
  }

};


//var headers = defaultCorsHeaders;
//
//headers['Content-Type'] = "text/plain";
//if ( request.url === "/classes/messages" && request.method === 'POST' ) {
//  request.on('data', function(chunk) {
//    console.log(chunk, 'chunk');
//    text += chunk;
//  });
//  console.log(text);
//
//  console.log("push", dataTemp.results);
//  request.on('end', function() {
//    var decodedBody = querystring.parse(text);
//    var stringify = JSON.stringify(decodedBody);
//    console.log("decodeBody", decodedBody);
//    dataTemp.results.push(decodedBody);
//    console.log("dataTemp is ", dataTemp);
//    response.writeHead(201, headers);
//    response.write(stringify);
//    response.end();
//  });
//} else if (request.url === "/classes/messages") {
//  response.writeHead(200, headers);
//  console.log("dataTemp is ", dataTemp);
//  response.write(JSON.stringify(dataTemp));
//  response.end();
//} else if (request.url !== "/classes/messages") {
//  console.log("404");
//  response.statusCode = 404;
//  response.end();
//}
